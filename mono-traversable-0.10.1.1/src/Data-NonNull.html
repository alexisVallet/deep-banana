<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<!-- Generated by HsColour, http://code.haskell.org/~malcolm/hscolour/ -->
<title>src/Data/NonNull.hs</title>
<link type='text/css' rel='stylesheet' href='hscolour.css' />
</head>
<body>
<pre><a name="line-1"></a><span class='hs-comment'>{-# LANGUAGE TypeFamilies #-}</span>
<a name="line-2"></a><span class='hs-comment'>{-# LANGUAGE FlexibleContexts, FlexibleInstances #-}</span>
<a name="line-3"></a><span class='hs-comment'>{-# LANGUAGE DefaultSignatures #-}</span>
<a name="line-4"></a><span class='hs-comment'>{-# LANGUAGE DeriveDataTypeable #-}</span>
<a name="line-5"></a><span class='hs-comment'>-- | Warning, this is Experimental!</span>
<a name="line-6"></a><span class='hs-comment'>--</span>
<a name="line-7"></a><span class='hs-comment'>-- "Data.NonNull" attempts to extend the concepts from</span>
<a name="line-8"></a><span class='hs-comment'>-- "Data.List.NonEmpty" to any 'MonoFoldable'.</span>
<a name="line-9"></a><span class='hs-comment'>--</span>
<a name="line-10"></a><span class='hs-comment'>-- 'NonNull' is a typeclass for a container with 1 or more elements.</span>
<a name="line-11"></a><span class='hs-comment'>-- "Data.List.NonEmpty" and 'NotEmpty a' are members of the typeclass</span>
<a name="line-12"></a><span class='hs-keyword'>module</span> <span class='hs-conid'>Data</span><span class='hs-varop'>.</span><span class='hs-conid'>NonNull</span> <span class='hs-layout'>(</span>
<a name="line-13"></a>    <span class='hs-conid'>NonNull</span>
<a name="line-14"></a>  <span class='hs-layout'>,</span> <span class='hs-varid'>fromNullable</span>
<a name="line-15"></a>  <span class='hs-layout'>,</span> <span class='hs-varid'>nonNull</span>
<a name="line-16"></a>  <span class='hs-layout'>,</span> <span class='hs-varid'>toNullable</span>
<a name="line-17"></a>  <span class='hs-layout'>,</span> <span class='hs-varid'>fromNonEmpty</span>
<a name="line-18"></a>  <span class='hs-layout'>,</span> <span class='hs-varid'>ncons</span>
<a name="line-19"></a>  <span class='hs-layout'>,</span> <span class='hs-varid'>nuncons</span>
<a name="line-20"></a>  <span class='hs-layout'>,</span> <span class='hs-varid'>splitFirst</span>
<a name="line-21"></a>  <span class='hs-layout'>,</span> <span class='hs-varid'>nfilter</span>
<a name="line-22"></a>  <span class='hs-layout'>,</span> <span class='hs-varid'>nfilterM</span>
<a name="line-23"></a>  <span class='hs-layout'>,</span> <span class='hs-varid'>nReplicate</span>
<a name="line-24"></a>  <span class='hs-layout'>,</span> <span class='hs-varid'>head</span>
<a name="line-25"></a>  <span class='hs-layout'>,</span> <span class='hs-varid'>tail</span>
<a name="line-26"></a>  <span class='hs-layout'>,</span> <span class='hs-varid'>last</span>
<a name="line-27"></a>  <span class='hs-layout'>,</span> <span class='hs-varid'>init</span>
<a name="line-28"></a>  <span class='hs-layout'>,</span> <span class='hs-varid'>ofoldMap1</span>
<a name="line-29"></a>  <span class='hs-layout'>,</span> <span class='hs-varid'>ofold1</span>
<a name="line-30"></a>  <span class='hs-layout'>,</span> <span class='hs-varid'>ofoldr1</span>
<a name="line-31"></a>  <span class='hs-layout'>,</span> <span class='hs-varid'>ofoldl1'</span>
<a name="line-32"></a>  <span class='hs-layout'>,</span> <span class='hs-varid'>maximum</span>
<a name="line-33"></a>  <span class='hs-layout'>,</span> <span class='hs-varid'>maximumBy</span>
<a name="line-34"></a>  <span class='hs-layout'>,</span> <span class='hs-varid'>minimum</span>
<a name="line-35"></a>  <span class='hs-layout'>,</span> <span class='hs-varid'>minimumBy</span>
<a name="line-36"></a>  <span class='hs-layout'>,</span> <span class='hs-layout'>(</span><span class='hs-varop'>&lt;|</span><span class='hs-layout'>)</span>
<a name="line-37"></a>  <span class='hs-layout'>,</span> <span class='hs-varid'>toMinList</span>
<a name="line-38"></a><span class='hs-layout'>)</span> <span class='hs-keyword'>where</span>
<a name="line-39"></a>
<a name="line-40"></a><span class='hs-keyword'>import</span> <span class='hs-conid'>Prelude</span> <span class='hs-varid'>hiding</span> <span class='hs-layout'>(</span><span class='hs-varid'>head</span><span class='hs-layout'>,</span> <span class='hs-varid'>tail</span><span class='hs-layout'>,</span> <span class='hs-varid'>init</span><span class='hs-layout'>,</span> <span class='hs-varid'>last</span><span class='hs-layout'>,</span> <span class='hs-varid'>reverse</span><span class='hs-layout'>,</span> <span class='hs-varid'>seq</span><span class='hs-layout'>,</span> <span class='hs-varid'>filter</span><span class='hs-layout'>,</span> <span class='hs-varid'>replicate</span><span class='hs-layout'>,</span> <span class='hs-varid'>maximum</span><span class='hs-layout'>,</span> <span class='hs-varid'>minimum</span><span class='hs-layout'>)</span>
<a name="line-41"></a><span class='hs-keyword'>import</span> <span class='hs-conid'>Control</span><span class='hs-varop'>.</span><span class='hs-conid'>Arrow</span> <span class='hs-layout'>(</span><span class='hs-varid'>second</span><span class='hs-layout'>)</span>
<a name="line-42"></a><span class='hs-keyword'>import</span> <span class='hs-conid'>Control</span><span class='hs-varop'>.</span><span class='hs-conid'>Exception</span><span class='hs-varop'>.</span><span class='hs-conid'>Base</span> <span class='hs-layout'>(</span><span class='hs-conid'>Exception</span><span class='hs-layout'>,</span> <span class='hs-varid'>throw</span><span class='hs-layout'>)</span>
<a name="line-43"></a><span class='hs-keyword'>import</span> <span class='hs-conid'>Data</span><span class='hs-varop'>.</span><span class='hs-conid'>Data</span>
<a name="line-44"></a><span class='hs-keyword'>import</span> <span class='hs-keyword'>qualified</span> <span class='hs-conid'>Data</span><span class='hs-varop'>.</span><span class='hs-conid'>List</span><span class='hs-varop'>.</span><span class='hs-conid'>NonEmpty</span> <span class='hs-keyword'>as</span> <span class='hs-conid'>NE</span>
<a name="line-45"></a><span class='hs-keyword'>import</span> <span class='hs-conid'>Data</span><span class='hs-varop'>.</span><span class='hs-conid'>Maybe</span> <span class='hs-layout'>(</span><span class='hs-varid'>fromMaybe</span><span class='hs-layout'>)</span>
<a name="line-46"></a><span class='hs-keyword'>import</span> <span class='hs-conid'>Data</span><span class='hs-varop'>.</span><span class='hs-conid'>MinLen</span>
<a name="line-47"></a><span class='hs-keyword'>import</span> <span class='hs-conid'>Data</span><span class='hs-varop'>.</span><span class='hs-conid'>MonoTraversable</span>
<a name="line-48"></a><span class='hs-keyword'>import</span> <span class='hs-conid'>Data</span><span class='hs-varop'>.</span><span class='hs-conid'>Sequences</span>
<a name="line-49"></a>
<a name="line-50"></a><a name="NullError"></a><span class='hs-keyword'>data</span> <span class='hs-conid'>NullError</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>NullError</span> <span class='hs-conid'>String</span> <span class='hs-keyword'>deriving</span> <span class='hs-layout'>(</span><span class='hs-conid'>Show</span><span class='hs-layout'>,</span> <span class='hs-conid'>Typeable</span><span class='hs-layout'>)</span>
<a name="line-51"></a><a name="instance%20mono%20-%3e%20Maybe%20(NonNull%20mono)%20fromNullable%20=%20toMinLen%20--%20%7c%20__Unsafely__%20convert%20from%20an%20__unsafe__%20monomorphic%20container%20to%20a%20__safe__%20--%20non-null%20monomorphic%20container.%20--%20--%20Throws%20an%20exception%20if%20the%20monomorphic%20container%20is%20empty.%20nonNull%20::%20MonoFoldable%20mono%20=%3e%20mono%20-%3e%20NonNull%20mono%20nonNull%20nullable%20=%20fromMaybe%20(throw%20$%20NullError%20%22Data.NonNull.nonNull%20(NonNull%20default):%20expected%20non-null%22)%20$%20fromNullable%20nullable%20--%20%7c%20__Safely__%20convert%20from%20a%20non-null%20monomorphic%20container%20to%20a%20nullable%20monomorphic%20container.%20toNullable%20::%20NonNull%20mono%20-%3e%20mono%20toNullable%20=%20unMinLen%20--%20%7c%20__Safely__%20convert%20from%20a%20'NonEmpty'%20list%20to%20a%20non-null%20monomorphic%20container.%20fromNonEmpty%20::%20IsSequence%20seq%20=%3e%20NE.NonEmpty%20(Element%20seq)%20-%3e%20NonNull%20seq%20fromNonEmpty%20=%20nonNull%20.%20fromList%20.%20NE.toList%20%7b-%23%20INLINE%20fromNonEmpty%20%23-%7d%20--%20%7c%20Specializes%20'fromNonEmpty'%20to%20lists%20only.%20toMinList%20::%20NE.NonEmpty%20a%20-%3e%20NonNull%20%5ba%5d%20toMinList%20=%20fromNonEmpty%20--%20%7c%20Prepend%20an%20element%20to%20a%20'SemiSequence',%20creating%20a%20non-null%20'SemiSequence'.%20--%20--%20Generally%20this%20uses%20cons%20underneath.%20--%20cons%20is%20not%20efficient%20for%20most%20data%20structures.%20--%20--%20Alternatives:%20--%20--%20*%20if%20you%20don't%20need%20to%20cons,%20use%20'fromNullable'%20or%20'nonNull'%20if%20you%20can%20create%20your%20structure%20in%20one%20go.%20--%20*%20if%20you%20need%20to%20cons,%20you%20might%20be%20able%20to%20start%20off%20with%20an%20efficient%20data%20structure%20such%20as%20a%20'NonEmpty'%20List.%20--%20'fronNonEmpty'%20will%20convert%20that%20to%20your%20data%20structure%20using%20the%20structure's%20fromList%20function.%20ncons%20::%20SemiSequence%20seq%20=%3e%20Element%20seq%20-%3e%20seq%20-%3e%20NonNull%20seq%20ncons%20x%20xs%20=%20nonNull%20$%20cons%20x%20xs%20--%20%7c%20Extract%20the%20first%20element%20of%20a%20sequnce%20and%20the%20rest%20of%20the%20non-null%20sequence%20if%20it%20exists.%20nuncons%20::%20IsSequence%20seq%20=%3e%20NonNull%20seq%20-%3e%20(Element%20seq,%20Maybe%20(NonNull%20seq))%20nuncons%20xs%20=%20second%20fromNullable%20$%20fromMaybe%20(error%20%22Data.NonNull.nuncons:%20data%20structure%20is%20null,%20it%20should%20be%20non-null%22)%20$%20uncons%20(toNullable%20xs)%20--%20%7c%20Same%20as%20'nuncons'%20with%20no%20guarantee%20that%20the%20rest%20of%20the%20sequence%20is%20non-null.%20splitFirst%20::%20IsSequence%20seq%20=%3e%20NonNull%20seq%20-%3e%20(Element%20seq,%20seq)%20splitFirst%20xs%20=%20fromMaybe%20(error%20%22Data.NonNull.splitFirst:%20data%20structure%20is%20null,%20it%20should%20be%20non-null%22)%20$%20uncons%20(toNullable%20xs)%20--%20%7c%20Equivalent%20to%20@%22Data.Sequence%22.'Data.Sequence.filter'@,%20--%20but%20works%20on%20non-nullable%20sequences.%20nfilter%20::%20IsSequence%20seq%20=%3e%20(Element%20seq%20-%3e%20Bool)%20-%3e%20NonNull%20seq%20-%3e%20seq%20nfilter%20f%20=%20filter%20f%20.%20toNullable%20--%20%7c%20Equivalent%20to%20@%22Data.Sequence%22.'Data.Sequence.filterM'@,%20--%20but%20works%20on%20non-nullable%20sequences.%20nfilterM%20::%20(Monad%20m,%20IsSequence%20seq)%20=%3e%20(Element%20seq%20-%3e%20m%20Bool)%20-%3e%20NonNull%20seq%20-%3e%20m%20seq%20nfilterM%20f%20=%20filterM%20f%20.%20toNullable%20--%20%7c%20Equivalent%20to%20@%22Data.Sequence%22.'Data.Sequence.replicate'@%20--%20--%20@i@%20must%20be%20@%3e%200@%20--%20--%20@i%20%3c=%200@%20is%20treated%20the%20same%20as%20providing%20@1@%20nReplicate%20::%20IsSequence%20seq%20=%3e%20Index%20seq%20-%3e%20Element%20seq%20-%3e%20NonNull%20seq%20nReplicate%20i%20=%20nonNull%20.%20replicate%20(max%201%20i)%20--%20%7c%20__Safe__%20version%20of%20'tailEx',%20only%20working%20on%20non-nullable%20sequences.%20tail%20::%20IsSequence%20seq%20=%3e%20NonNull%20seq%20-%3e%20seq%20tail%20=%20tailEx%20.%20toNullable%20%7b-%23%20INLINE%20tail%20%23-%7d%20--%20%7c%20__Safe__%20version%20of%20'initEx',%20only%20working%20on%20non-nullable%20sequences.%20init%20::%20IsSequence%20seq%20=%3e%20NonNull%20seq%20-%3e%20seq%20init%20=%20initEx%20.%20toNullable%20%7b-%23%20INLINE%20init%20%23-%7d%20infixr%205%20%3c%7c%20--%20%7c%20Prepend%20an%20element%20to%20a%20non-null%20'SemiSequence'.%20(%3c%7c)%20::%20SemiSequence%20seq%20=%3e%20Element%20seq%20-%3e%20NonNull%20seq%20-%3e%20NonNull%20seq%20x%20%3c%7c%20y%20=%20ncons%20x%20(toNullable%20y)"></a><span class='hs-keyword'>instance</span> <span class='hs-conid'>Exception</span> <span class='hs-conid'>NullError</span>
<a name="line-52"></a>
<a name="line-53"></a><a name="NonNull"></a><span class='hs-comment'>-- | A monomorphic container that is not null.</span>
<a name="line-54"></a><a name="NonNull"></a><span class='hs-keyword'>type</span> <span class='hs-conid'>NonNull</span> <span class='hs-varid'>mono</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>MinLen</span> <span class='hs-layout'>(</span><span class='hs-conid'>Succ</span> <span class='hs-conid'>Zero</span><span class='hs-layout'>)</span> <span class='hs-varid'>mono</span>
<a name="line-55"></a>
<a name="line-56"></a><a name="fromNullable"></a><span class='hs-comment'>-- | __Safely__ convert from an __unsafe__ monomorphic container to a __safe__</span>
<a name="line-57"></a><span class='hs-comment'>-- non-null monomorphic container.</span>
<a name="line-58"></a><span class='hs-definition'>fromNullable</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>MonoFoldable</span> <span class='hs-varid'>mono</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-varid'>mono</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Maybe</span> <span class='hs-layout'>(</span><span class='hs-conid'>NonNull</span> <span class='hs-varid'>mono</span><span class='hs-layout'>)</span>
<a name="line-59"></a><span class='hs-definition'>fromNullable</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>toMinLen</span>
<a name="line-60"></a>
<a name="line-61"></a><a name="nonNull"></a><span class='hs-comment'>-- | __Unsafely__ convert from an __unsafe__ monomorphic container to a __safe__</span>
<a name="line-62"></a><span class='hs-comment'>-- non-null monomorphic container.</span>
<a name="line-63"></a><span class='hs-comment'>--</span>
<a name="line-64"></a><span class='hs-comment'>-- Throws an exception if the monomorphic container is empty.</span>
<a name="line-65"></a><span class='hs-definition'>nonNull</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>MonoFoldable</span> <span class='hs-varid'>mono</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-varid'>mono</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>NonNull</span> <span class='hs-varid'>mono</span>
<a name="line-66"></a><span class='hs-definition'>nonNull</span> <span class='hs-varid'>nullable</span> <span class='hs-keyglyph'>=</span>
<a name="line-67"></a>  <span class='hs-varid'>fromMaybe</span> <span class='hs-layout'>(</span><span class='hs-varid'>throw</span> <span class='hs-varop'>$</span> <span class='hs-conid'>NullError</span> <span class='hs-str'>"Data.NonNull.nonNull (NonNull default): expected non-null"</span><span class='hs-layout'>)</span>
<a name="line-68"></a>          <span class='hs-varop'>$</span> <span class='hs-varid'>fromNullable</span> <span class='hs-varid'>nullable</span>
<a name="line-69"></a>
<a name="line-70"></a><a name="toNullable"></a><span class='hs-comment'>-- | __Safely__ convert from a non-null monomorphic container to a nullable monomorphic container.</span>
<a name="line-71"></a><span class='hs-definition'>toNullable</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>NonNull</span> <span class='hs-varid'>mono</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-varid'>mono</span>
<a name="line-72"></a><span class='hs-definition'>toNullable</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>unMinLen</span>
<a name="line-73"></a>
<a name="line-74"></a><a name="fromNonEmpty"></a><span class='hs-comment'>-- | __Safely__ convert from a 'NonEmpty' list to a non-null monomorphic container.</span>
<a name="line-75"></a><span class='hs-definition'>fromNonEmpty</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>IsSequence</span> <span class='hs-varid'>seq</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-conid'>NE</span><span class='hs-varop'>.</span><span class='hs-conid'>NonEmpty</span> <span class='hs-layout'>(</span><span class='hs-conid'>Element</span> <span class='hs-varid'>seq</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>NonNull</span> <span class='hs-varid'>seq</span>
<a name="line-76"></a><span class='hs-definition'>fromNonEmpty</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>nonNull</span> <span class='hs-varop'>.</span> <span class='hs-varid'>fromList</span> <span class='hs-varop'>.</span> <span class='hs-conid'>NE</span><span class='hs-varop'>.</span><span class='hs-varid'>toList</span>
<a name="line-77"></a><span class='hs-comment'>{-# INLINE fromNonEmpty #-}</span>
<a name="line-78"></a>
<a name="line-79"></a><a name="toMinList"></a><span class='hs-comment'>-- | Specializes 'fromNonEmpty' to lists only.</span>
<a name="line-80"></a><span class='hs-definition'>toMinList</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>NE</span><span class='hs-varop'>.</span><span class='hs-conid'>NonEmpty</span> <span class='hs-varid'>a</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>NonNull</span> <span class='hs-keyglyph'>[</span><span class='hs-varid'>a</span><span class='hs-keyglyph'>]</span>
<a name="line-81"></a><span class='hs-definition'>toMinList</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>fromNonEmpty</span>
<a name="line-82"></a>
<a name="line-83"></a><a name="ncons"></a><span class='hs-comment'>-- | Prepend an element to a 'SemiSequence', creating a non-null 'SemiSequence'.</span>
<a name="line-84"></a><span class='hs-comment'>--</span>
<a name="line-85"></a><span class='hs-comment'>-- Generally this uses cons underneath.</span>
<a name="line-86"></a><span class='hs-comment'>-- cons is not efficient for most data structures.</span>
<a name="line-87"></a><span class='hs-comment'>--</span>
<a name="line-88"></a><span class='hs-comment'>-- Alternatives:</span>
<a name="line-89"></a><span class='hs-comment'>--</span>
<a name="line-90"></a><span class='hs-comment'>-- * if you don't need to cons, use 'fromNullable' or 'nonNull' if you can create your structure in one go.</span>
<a name="line-91"></a><span class='hs-comment'>-- * if you need to cons, you might be able to start off with an efficient data structure such as a 'NonEmpty' List.</span>
<a name="line-92"></a><span class='hs-comment'>--     'fronNonEmpty' will convert that to your data structure using the structure's fromList function.</span>
<a name="line-93"></a><span class='hs-definition'>ncons</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>SemiSequence</span> <span class='hs-varid'>seq</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-conid'>Element</span> <span class='hs-varid'>seq</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-varid'>seq</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>NonNull</span> <span class='hs-varid'>seq</span>
<a name="line-94"></a><span class='hs-definition'>ncons</span> <span class='hs-varid'>x</span> <span class='hs-varid'>xs</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>nonNull</span> <span class='hs-varop'>$</span> <span class='hs-varid'>cons</span> <span class='hs-varid'>x</span> <span class='hs-varid'>xs</span>
<a name="line-95"></a>
<a name="line-96"></a><a name="nuncons"></a><span class='hs-comment'>-- | Extract the first element of a sequnce and the rest of the non-null sequence if it exists.</span>
<a name="line-97"></a><span class='hs-definition'>nuncons</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>IsSequence</span> <span class='hs-varid'>seq</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-conid'>NonNull</span> <span class='hs-varid'>seq</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-layout'>(</span><span class='hs-conid'>Element</span> <span class='hs-varid'>seq</span><span class='hs-layout'>,</span> <span class='hs-conid'>Maybe</span> <span class='hs-layout'>(</span><span class='hs-conid'>NonNull</span> <span class='hs-varid'>seq</span><span class='hs-layout'>)</span><span class='hs-layout'>)</span>
<a name="line-98"></a><span class='hs-definition'>nuncons</span> <span class='hs-varid'>xs</span> <span class='hs-keyglyph'>=</span>
<a name="line-99"></a>  <span class='hs-varid'>second</span> <span class='hs-varid'>fromNullable</span>
<a name="line-100"></a>    <span class='hs-varop'>$</span> <span class='hs-varid'>fromMaybe</span> <span class='hs-layout'>(</span><span class='hs-varid'>error</span> <span class='hs-str'>"Data.NonNull.nuncons: data structure is null, it should be non-null"</span><span class='hs-layout'>)</span>
<a name="line-101"></a>              <span class='hs-varop'>$</span> <span class='hs-varid'>uncons</span> <span class='hs-layout'>(</span><span class='hs-varid'>toNullable</span> <span class='hs-varid'>xs</span><span class='hs-layout'>)</span>
<a name="line-102"></a>
<a name="line-103"></a><a name="splitFirst"></a><span class='hs-comment'>-- | Same as 'nuncons' with no guarantee that the rest of the sequence is non-null.</span>
<a name="line-104"></a><span class='hs-definition'>splitFirst</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>IsSequence</span> <span class='hs-varid'>seq</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-conid'>NonNull</span> <span class='hs-varid'>seq</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-layout'>(</span><span class='hs-conid'>Element</span> <span class='hs-varid'>seq</span><span class='hs-layout'>,</span> <span class='hs-varid'>seq</span><span class='hs-layout'>)</span>
<a name="line-105"></a><span class='hs-definition'>splitFirst</span> <span class='hs-varid'>xs</span> <span class='hs-keyglyph'>=</span>
<a name="line-106"></a>  <span class='hs-varid'>fromMaybe</span> <span class='hs-layout'>(</span><span class='hs-varid'>error</span> <span class='hs-str'>"Data.NonNull.splitFirst: data structure is null, it should be non-null"</span><span class='hs-layout'>)</span>
<a name="line-107"></a>          <span class='hs-varop'>$</span> <span class='hs-varid'>uncons</span> <span class='hs-layout'>(</span><span class='hs-varid'>toNullable</span> <span class='hs-varid'>xs</span><span class='hs-layout'>)</span>
<a name="line-108"></a>
<a name="line-109"></a><a name="nfilter"></a><span class='hs-comment'>-- | Equivalent to @"Data.Sequence".'Data.Sequence.filter'@,</span>
<a name="line-110"></a><span class='hs-comment'>-- but works on non-nullable sequences.</span>
<a name="line-111"></a><span class='hs-definition'>nfilter</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>IsSequence</span> <span class='hs-varid'>seq</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-layout'>(</span><span class='hs-conid'>Element</span> <span class='hs-varid'>seq</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Bool</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>NonNull</span> <span class='hs-varid'>seq</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-varid'>seq</span>
<a name="line-112"></a><span class='hs-definition'>nfilter</span> <span class='hs-varid'>f</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>filter</span> <span class='hs-varid'>f</span> <span class='hs-varop'>.</span> <span class='hs-varid'>toNullable</span>
<a name="line-113"></a>
<a name="line-114"></a><a name="nfilterM"></a><span class='hs-comment'>-- | Equivalent to @"Data.Sequence".'Data.Sequence.filterM'@,</span>
<a name="line-115"></a><span class='hs-comment'>-- but works on non-nullable sequences.</span>
<a name="line-116"></a><span class='hs-definition'>nfilterM</span> <span class='hs-keyglyph'>::</span> <span class='hs-layout'>(</span><span class='hs-conid'>Monad</span> <span class='hs-varid'>m</span><span class='hs-layout'>,</span> <span class='hs-conid'>IsSequence</span> <span class='hs-varid'>seq</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-layout'>(</span><span class='hs-conid'>Element</span> <span class='hs-varid'>seq</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-varid'>m</span> <span class='hs-conid'>Bool</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>NonNull</span> <span class='hs-varid'>seq</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-varid'>m</span> <span class='hs-varid'>seq</span>
<a name="line-117"></a><span class='hs-definition'>nfilterM</span> <span class='hs-varid'>f</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>filterM</span> <span class='hs-varid'>f</span> <span class='hs-varop'>.</span> <span class='hs-varid'>toNullable</span>
<a name="line-118"></a>
<a name="line-119"></a><a name="nReplicate"></a><span class='hs-comment'>-- | Equivalent to @"Data.Sequence".'Data.Sequence.replicate'@</span>
<a name="line-120"></a><span class='hs-comment'>--</span>
<a name="line-121"></a><span class='hs-comment'>-- @i@ must be @&gt; 0@</span>
<a name="line-122"></a><span class='hs-comment'>--</span>
<a name="line-123"></a><span class='hs-comment'>-- @i &lt;= 0@ is treated the same as providing @1@</span>
<a name="line-124"></a><span class='hs-definition'>nReplicate</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>IsSequence</span> <span class='hs-varid'>seq</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-conid'>Index</span> <span class='hs-varid'>seq</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Element</span> <span class='hs-varid'>seq</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>NonNull</span> <span class='hs-varid'>seq</span>
<a name="line-125"></a><span class='hs-definition'>nReplicate</span> <span class='hs-varid'>i</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>nonNull</span> <span class='hs-varop'>.</span> <span class='hs-varid'>replicate</span> <span class='hs-layout'>(</span><span class='hs-varid'>max</span> <span class='hs-num'>1</span> <span class='hs-varid'>i</span><span class='hs-layout'>)</span>
<a name="line-126"></a>
<a name="line-127"></a><a name="tail"></a><span class='hs-comment'>-- | __Safe__ version of 'tailEx', only working on non-nullable sequences.</span>
<a name="line-128"></a><span class='hs-definition'>tail</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>IsSequence</span> <span class='hs-varid'>seq</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-conid'>NonNull</span> <span class='hs-varid'>seq</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-varid'>seq</span>
<a name="line-129"></a><span class='hs-definition'>tail</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>tailEx</span> <span class='hs-varop'>.</span> <span class='hs-varid'>toNullable</span>
<a name="line-130"></a><span class='hs-comment'>{-# INLINE tail #-}</span>
<a name="line-131"></a>
<a name="line-132"></a><a name="init"></a><span class='hs-comment'>-- | __Safe__ version of 'initEx', only working on non-nullable sequences.</span>
<a name="line-133"></a><span class='hs-definition'>init</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>IsSequence</span> <span class='hs-varid'>seq</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-conid'>NonNull</span> <span class='hs-varid'>seq</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-varid'>seq</span>
<a name="line-134"></a><span class='hs-definition'>init</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>initEx</span> <span class='hs-varop'>.</span> <span class='hs-varid'>toNullable</span>
<a name="line-135"></a><span class='hs-comment'>{-# INLINE init #-}</span>
<a name="line-136"></a>
<a name="line-137"></a><span class='hs-keyword'>infixr</span> <span class='hs-num'>5</span> <span class='hs-varop'>&lt;|</span>
<a name="line-138"></a>
<a name="line-139"></a><a name="%3c%7c"></a><span class='hs-comment'>-- | Prepend an element to a non-null 'SemiSequence'.</span>
<a name="line-140"></a><span class='hs-layout'>(</span><span class='hs-varop'>&lt;|</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>SemiSequence</span> <span class='hs-varid'>seq</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-conid'>Element</span> <span class='hs-varid'>seq</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>NonNull</span> <span class='hs-varid'>seq</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>NonNull</span> <span class='hs-varid'>seq</span>
<a name="line-141"></a><a name="x"></a><span class='hs-definition'>x</span> <span class='hs-varop'>&lt;|</span> <span class='hs-varid'>y</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>ncons</span> <span class='hs-varid'>x</span> <span class='hs-layout'>(</span><span class='hs-varid'>toNullable</span> <span class='hs-varid'>y</span><span class='hs-layout'>)</span>
</pre></body>
</html>
