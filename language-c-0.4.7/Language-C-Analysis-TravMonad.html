<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Language.C.Analysis.TravMonad</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Language-C-Analysis-TravMonad.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">language-c-0.4.7: Analysis and generation of C code</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Copyright</th><td>(c) 2008 Benedikt Huber</td></tr><tr><th>License</th><td>BSD-style</td></tr><tr><th>Maintainer</th><td>benedikt.huber@gmail.com</td></tr><tr><th>Stability</th><td>alpha</td></tr><tr><th>Portability</th><td>ghc</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell98</td></tr></table><p class="caption">Language.C.Analysis.TravMonad</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Name generation monad</a></li><li><a href="#g:2">Symbol table monad</a></li><li><a href="#g:3">Specialized C error-handling monad</a></li><li><a href="#g:4">AST traversal monad</a></li><li><a href="#g:5">Handling declarations</a></li><li><a href="#g:6">Symbol table scope modification</a></li><li><a href="#g:7">Symbol table lookup (delegate)</a></li><li><a href="#g:8">Symbol table modification</a></li><li><a href="#g:9">Additional error handling facilities</a></li><li><a href="#g:10">Trav - default MonadTrav implementation</a></li><li><a href="#g:11">Language options</a></li><li><a href="#g:12">Helpers</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Monad for Traversals of the C AST.</p><p>For the traversal, we maintain a symboltable and need MonadError and unique
 name generation facilities.
 Furthermore, the user may provide callbacks to handle declarations and definitions.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">class</span> <a href="../base-4.7.0.2/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="#t:MonadName">MonadName</a> m <span class="keyword">where</span><ul class="subs"><li><a href="#v:genName">genName</a> :: m <a href="Language-C-Data-Name.html#t:Name">Name</a></li></ul></li><li class="src short"><span class="keyword">class</span> <a href="../base-4.7.0.2/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="#t:MonadSymtab">MonadSymtab</a> m <span class="keyword">where</span><ul class="subs"><li><a href="#v:getDefTable">getDefTable</a> :: m <a href="Language-C-Analysis-DefTable.html#t:DefTable">DefTable</a></li><li><a href="#v:withDefTable">withDefTable</a> ::  (<a href="Language-C-Analysis-DefTable.html#t:DefTable">DefTable</a> -&gt; (a, <a href="Language-C-Analysis-DefTable.html#t:DefTable">DefTable</a>)) -&gt; m a</li></ul></li><li class="src short"><span class="keyword">class</span> <a href="../base-4.7.0.2/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="#t:MonadCError">MonadCError</a> m <span class="keyword">where</span><ul class="subs"><li><a href="#v:throwTravError">throwTravError</a> :: <a href="Language-C-Data-Error.html#t:Error">Error</a> e =&gt; e -&gt; m a</li><li><a href="#v:catchTravError">catchTravError</a> ::  m a -&gt; (<a href="Language-C-Data-Error.html#t:CError">CError</a> -&gt; m a) -&gt; m a</li><li><a href="#v:recordError">recordError</a> :: <a href="Language-C-Data-Error.html#t:Error">Error</a> e =&gt; e -&gt; m ()</li><li><a href="#v:getErrors">getErrors</a> :: m [<a href="Language-C-Data-Error.html#t:CError">CError</a>]</li></ul></li><li class="src short"><span class="keyword">class</span> (<a href="Language-C-Analysis-TravMonad.html#t:MonadName">MonadName</a> m, <a href="Language-C-Analysis-TravMonad.html#t:MonadSymtab">MonadSymtab</a> m, <a href="Language-C-Analysis-TravMonad.html#t:MonadCError">MonadCError</a> m) =&gt; <a href="#t:MonadTrav">MonadTrav</a> m <span class="keyword">where</span><ul class="subs"><li><a href="#v:handleDecl">handleDecl</a> :: <a href="Language-C-Analysis-SemRep.html#t:DeclEvent">DeclEvent</a> -&gt; m ()</li></ul></li><li class="src short"><a href="#v:handleTagDecl">handleTagDecl</a> :: (<a href="Language-C-Analysis-TravMonad.html#t:MonadCError">MonadCError</a> m, <a href="Language-C-Analysis-TravMonad.html#t:MonadSymtab">MonadSymtab</a> m) =&gt; <a href="Language-C-Analysis-DefTable.html#t:TagFwdDecl">TagFwdDecl</a> -&gt; m ()</li><li class="src short"><a href="#v:handleTagDef">handleTagDef</a> :: <a href="Language-C-Analysis-TravMonad.html#t:MonadTrav">MonadTrav</a> m =&gt; <a href="Language-C-Analysis-SemRep.html#t:TagDef">TagDef</a> -&gt; m ()</li><li class="src short"><a href="#v:handleEnumeratorDef">handleEnumeratorDef</a> :: (<a href="Language-C-Analysis-TravMonad.html#t:MonadCError">MonadCError</a> m, <a href="Language-C-Analysis-TravMonad.html#t:MonadSymtab">MonadSymtab</a> m) =&gt; <a href="Language-C-Analysis-SemRep.html#t:Enumerator">Enumerator</a> -&gt; m ()</li><li class="src short"><a href="#v:handleTypeDef">handleTypeDef</a> :: <a href="Language-C-Analysis-TravMonad.html#t:MonadTrav">MonadTrav</a> m =&gt; <a href="Language-C-Analysis-SemRep.html#t:TypeDef">TypeDef</a> -&gt; m ()</li><li class="src short"><a href="#v:handleObjectDef">handleObjectDef</a> :: <a href="Language-C-Analysis-TravMonad.html#t:MonadTrav">MonadTrav</a> m =&gt; <a href="../base-4.7.0.2/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="Language-C-Data-Ident.html#t:Ident">Ident</a> -&gt; <a href="Language-C-Analysis-SemRep.html#t:ObjDef">ObjDef</a> -&gt; m ()</li><li class="src short"><a href="#v:handleFunDef">handleFunDef</a> :: <a href="Language-C-Analysis-TravMonad.html#t:MonadTrav">MonadTrav</a> m =&gt; <a href="Language-C-Data-Ident.html#t:Ident">Ident</a> -&gt; <a href="Language-C-Analysis-SemRep.html#t:FunDef">FunDef</a> -&gt; m ()</li><li class="src short"><a href="#v:handleVarDecl">handleVarDecl</a> :: <a href="Language-C-Analysis-TravMonad.html#t:MonadTrav">MonadTrav</a> m =&gt; <a href="../base-4.7.0.2/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="Language-C-Analysis-SemRep.html#t:Decl">Decl</a> -&gt; m ()</li><li class="src short"><a href="#v:handleParamDecl">handleParamDecl</a> :: <a href="Language-C-Analysis-TravMonad.html#t:MonadTrav">MonadTrav</a> m =&gt; <a href="Language-C-Analysis-SemRep.html#t:ParamDecl">ParamDecl</a> -&gt; m ()</li><li class="src short"><a href="#v:handleAsmBlock">handleAsmBlock</a> :: <a href="Language-C-Analysis-TravMonad.html#t:MonadTrav">MonadTrav</a> m =&gt; <a href="Language-C-Analysis-SemRep.html#t:AsmBlock">AsmBlock</a> -&gt; m ()</li><li class="src short"><a href="#v:enterPrototypeScope">enterPrototypeScope</a> :: <a href="Language-C-Analysis-TravMonad.html#t:MonadSymtab">MonadSymtab</a> m =&gt; m ()</li><li class="src short"><a href="#v:leavePrototypeScope">leavePrototypeScope</a> :: <a href="Language-C-Analysis-TravMonad.html#t:MonadSymtab">MonadSymtab</a> m =&gt; m ()</li><li class="src short"><a href="#v:enterFunctionScope">enterFunctionScope</a> :: <a href="Language-C-Analysis-TravMonad.html#t:MonadSymtab">MonadSymtab</a> m =&gt; m ()</li><li class="src short"><a href="#v:leaveFunctionScope">leaveFunctionScope</a> :: <a href="Language-C-Analysis-TravMonad.html#t:MonadSymtab">MonadSymtab</a> m =&gt; m ()</li><li class="src short"><a href="#v:enterBlockScope">enterBlockScope</a> :: <a href="Language-C-Analysis-TravMonad.html#t:MonadSymtab">MonadSymtab</a> m =&gt; m ()</li><li class="src short"><a href="#v:leaveBlockScope">leaveBlockScope</a> :: <a href="Language-C-Analysis-TravMonad.html#t:MonadSymtab">MonadSymtab</a> m =&gt; m ()</li><li class="src short"><a href="#v:lookupTypeDef">lookupTypeDef</a> :: (<a href="Language-C-Analysis-TravMonad.html#t:MonadCError">MonadCError</a> m, <a href="Language-C-Analysis-TravMonad.html#t:MonadSymtab">MonadSymtab</a> m) =&gt; <a href="Language-C-Data-Ident.html#t:Ident">Ident</a> -&gt; m <a href="Language-C-Analysis-SemRep.html#t:Type">Type</a></li><li class="src short"><a href="#v:lookupObject">lookupObject</a> :: (<a href="Language-C-Analysis-TravMonad.html#t:MonadCError">MonadCError</a> m, <a href="Language-C-Analysis-TravMonad.html#t:MonadSymtab">MonadSymtab</a> m) =&gt; <a href="Language-C-Data-Ident.html#t:Ident">Ident</a> -&gt; m (<a href="../base-4.7.0.2/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Language-C-Analysis-SemRep.html#t:IdentDecl">IdentDecl</a>)</li><li class="src short"><a href="#v:createSUERef">createSUERef</a> :: (<a href="Language-C-Analysis-TravMonad.html#t:MonadCError">MonadCError</a> m, <a href="Language-C-Analysis-TravMonad.html#t:MonadSymtab">MonadSymtab</a> m) =&gt; <a href="Language-C-Data-Node.html#t:NodeInfo">NodeInfo</a> -&gt; <a href="../base-4.7.0.2/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Language-C-Data-Ident.html#t:Ident">Ident</a> -&gt; m <a href="Language-C-Data-Ident.html#t:SUERef">SUERef</a></li><li class="src short"><a href="#v:hadHardErrors">hadHardErrors</a> :: [<a href="Language-C-Data-Error.html#t:CError">CError</a>] -&gt; <a href="../base-4.7.0.2/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:handleTravError">handleTravError</a> :: <a href="Language-C-Analysis-TravMonad.html#t:MonadCError">MonadCError</a> m =&gt; m a -&gt; m (<a href="../base-4.7.0.2/Data-Maybe.html#t:Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:throwOnLeft">throwOnLeft</a> :: (<a href="Language-C-Analysis-TravMonad.html#t:MonadCError">MonadCError</a> m, <a href="Language-C-Data-Error.html#t:Error">Error</a> e) =&gt; <a href="../base-4.7.0.2/Data-Either.html#t:Either">Either</a> e a -&gt; m a</li><li class="src short"><a href="#v:astError">astError</a> :: <a href="Language-C-Analysis-TravMonad.html#t:MonadCError">MonadCError</a> m =&gt; <a href="Language-C-Data-Node.html#t:NodeInfo">NodeInfo</a> -&gt; <a href="../base-4.7.0.2/Data-String.html#t:String">String</a> -&gt; m a</li><li class="src short"><a href="#v:warn">warn</a> :: (<a href="Language-C-Data-Error.html#t:Error">Error</a> e, <a href="Language-C-Analysis-TravMonad.html#t:MonadCError">MonadCError</a> m) =&gt; e -&gt; m ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:Trav">Trav</a> s a</li><li class="src short"><a href="#v:runTrav">runTrav</a> :: <span class="keyword">forall</span> s a. s -&gt; <a href="Language-C-Analysis-TravMonad.html#t:Trav">Trav</a> s a -&gt; <a href="../base-4.7.0.2/Data-Either.html#t:Either">Either</a> [<a href="Language-C-Data-Error.html#t:CError">CError</a>] (a, <a href="Language-C-Analysis-TravMonad.html#t:TravState">TravState</a> s)</li><li class="src short"><a href="#v:runTrav_">runTrav_</a> ::  <a href="Language-C-Analysis-TravMonad.html#t:Trav">Trav</a> () a -&gt; <a href="../base-4.7.0.2/Data-Either.html#t:Either">Either</a> [<a href="Language-C-Data-Error.html#t:CError">CError</a>] (a, [<a href="Language-C-Data-Error.html#t:CError">CError</a>])</li><li class="src short"><span class="keyword">data</span> <a href="#t:TravState">TravState</a> s</li><li class="src short"><a href="#v:initTravState">initTravState</a> ::  s -&gt; <a href="Language-C-Analysis-TravMonad.html#t:TravState">TravState</a> s</li><li class="src short"><a href="#v:withExtDeclHandler">withExtDeclHandler</a> ::  <a href="Language-C-Analysis-TravMonad.html#t:Trav">Trav</a> s a -&gt; (<a href="Language-C-Analysis-SemRep.html#t:DeclEvent">DeclEvent</a> -&gt; <a href="Language-C-Analysis-TravMonad.html#t:Trav">Trav</a> s ()) -&gt; <a href="Language-C-Analysis-TravMonad.html#t:Trav">Trav</a> s a</li><li class="src short"><a href="#v:modifyUserState">modifyUserState</a> ::  (s -&gt; s) -&gt; <a href="Language-C-Analysis-TravMonad.html#t:Trav">Trav</a> s ()</li><li class="src short"><a href="#v:userState">userState</a> :: <a href="Language-C-Analysis-TravMonad.html#t:TravState">TravState</a> s -&gt; s</li><li class="src short"><a href="#v:getUserState">getUserState</a> ::  <a href="Language-C-Analysis-TravMonad.html#t:Trav">Trav</a> s s</li><li class="src short"><span class="keyword">data</span> <a href="#t:TravOptions">TravOptions</a> = <a href="#v:TravOptions">TravOptions</a> {<ul class="subs"><li><a href="#v:language">language</a> :: <a href="Language-C-Analysis-TravMonad.html#t:CLanguage">CLanguage</a></li></ul>}</li><li class="src short"><a href="#v:modifyOptions">modifyOptions</a> ::  (<a href="Language-C-Analysis-TravMonad.html#t:TravOptions">TravOptions</a> -&gt; <a href="Language-C-Analysis-TravMonad.html#t:TravOptions">TravOptions</a>) -&gt; <a href="Language-C-Analysis-TravMonad.html#t:Trav">Trav</a> s ()</li><li class="src short"><a href="#v:travErrors">travErrors</a> ::  <a href="Language-C-Analysis-TravMonad.html#t:TravState">TravState</a> s -&gt; [<a href="Language-C-Data-Error.html#t:CError">CError</a>]</li><li class="src short"><span class="keyword">data</span> <a href="#t:CLanguage">CLanguage</a><ul class="subs"><li>= <a href="#v:C89">C89</a></li><li>| <a href="#v:C99">C99</a></li><li>| <a href="#v:GNU89">GNU89</a></li><li>| <a href="#v:GNU99">GNU99</a></li></ul></li><li class="src short"><a href="#v:mapMaybeM">mapMaybeM</a> :: <a href="../base-4.7.0.2/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="../base-4.7.0.2/Data-Maybe.html#t:Maybe">Maybe</a> a -&gt; (a -&gt; m b) -&gt; m (<a href="../base-4.7.0.2/Data-Maybe.html#t:Maybe">Maybe</a> b)</li><li class="src short"><a href="#v:maybeM">maybeM</a> :: <a href="../base-4.7.0.2/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="../base-4.7.0.2/Data-Maybe.html#t:Maybe">Maybe</a> a -&gt; (a -&gt; m ()) -&gt; m ()</li><li class="src short"><a href="#v:mapSndM">mapSndM</a> :: <a href="../base-4.7.0.2/Control-Monad.html#t:Monad">Monad</a> m =&gt; (b -&gt; m c) -&gt; (a, b) -&gt; m (a, c)</li><li class="src short"><a href="#v:concatMapM">concatMapM</a> :: <a href="../base-4.7.0.2/Control-Monad.html#t:Monad">Monad</a> m =&gt; (a -&gt; m [b]) -&gt; [a] -&gt; m [b]</li></ul></div><div id="interface"><h1 id="g:1">Name generation monad</h1><div class="top"><p class="src"><span class="keyword">class</span> <a href="../base-4.7.0.2/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a name="t:MonadName" class="def">MonadName</a> m <span class="keyword">where</span></p><div class="subs methods"><p class="caption">Methods</p><p class="src"><a name="v:genName" class="def">genName</a> :: m <a href="Language-C-Data-Name.html#t:Name">Name</a></p><div class="doc"><p>unique name generation</p></div></div><div class="subs instances"><p id="control.i:MonadName" class="caption collapser" onclick="toggleSection('i:MonadName')">Instances</p><div id="section.i:MonadName" class="show"><table><tr><td class="src"><a href="Language-C-Analysis-TravMonad.html#t:MonadName">MonadName</a> (<a href="Language-C-Analysis-TravMonad.html#t:Trav">Trav</a> s)</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><h1 id="g:2">Symbol table monad</h1><div class="top"><p class="src"><span class="keyword">class</span> <a href="../base-4.7.0.2/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a name="t:MonadSymtab" class="def">MonadSymtab</a> m <span class="keyword">where</span></p><div class="subs methods"><p class="caption">Methods</p><p class="src"><a name="v:getDefTable" class="def">getDefTable</a> :: m <a href="Language-C-Analysis-DefTable.html#t:DefTable">DefTable</a></p><div class="doc"><p>return the definition table</p></div><p class="src"><a name="v:withDefTable" class="def">withDefTable</a> ::  (<a href="Language-C-Analysis-DefTable.html#t:DefTable">DefTable</a> -&gt; (a, <a href="Language-C-Analysis-DefTable.html#t:DefTable">DefTable</a>)) -&gt; m a</p><div class="doc"><p>perform an action modifying the definition table</p></div></div><div class="subs instances"><p id="control.i:MonadSymtab" class="caption collapser" onclick="toggleSection('i:MonadSymtab')">Instances</p><div id="section.i:MonadSymtab" class="show"><table><tr><td class="src"><a href="Language-C-Analysis-TravMonad.html#t:MonadSymtab">MonadSymtab</a> (<a href="Language-C-Analysis-TravMonad.html#t:Trav">Trav</a> s)</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><h1 id="g:3">Specialized C error-handling monad</h1><div class="top"><p class="src"><span class="keyword">class</span> <a href="../base-4.7.0.2/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a name="t:MonadCError" class="def">MonadCError</a> m <span class="keyword">where</span></p><div class="subs methods"><p class="caption">Methods</p><p class="src"><a name="v:throwTravError" class="def">throwTravError</a> :: <a href="Language-C-Data-Error.html#t:Error">Error</a> e =&gt; e -&gt; m a</p><div class="doc"><p>throw an <code><a href="Language-C-Data-Error.html#t:Error">Error</a></code></p></div><p class="src"><a name="v:catchTravError" class="def">catchTravError</a> ::  m a -&gt; (<a href="Language-C-Data-Error.html#t:CError">CError</a> -&gt; m a) -&gt; m a</p><div class="doc"><p>catch an <code><a href="Language-C-Data-Error.html#t:Error">Error</a></code> (we could implement dynamically-typed catch here)</p></div><p class="src"><a name="v:recordError" class="def">recordError</a> :: <a href="Language-C-Data-Error.html#t:Error">Error</a> e =&gt; e -&gt; m ()</p><div class="doc"><p>remember that an <code><a href="Language-C-Data-Error.html#t:Error">Error</a></code> occurred (without throwing it)</p></div><p class="src"><a name="v:getErrors" class="def">getErrors</a> :: m [<a href="Language-C-Data-Error.html#t:CError">CError</a>]</p><div class="doc"><p>return the list of recorded errors</p></div></div><div class="subs instances"><p id="control.i:MonadCError" class="caption collapser" onclick="toggleSection('i:MonadCError')">Instances</p><div id="section.i:MonadCError" class="show"><table><tr><td class="src"><a href="Language-C-Analysis-TravMonad.html#t:MonadCError">MonadCError</a> (<a href="Language-C-Analysis-TravMonad.html#t:Trav">Trav</a> s)</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><h1 id="g:4">AST traversal monad</h1><div class="top"><p class="src"><span class="keyword">class</span> (<a href="Language-C-Analysis-TravMonad.html#t:MonadName">MonadName</a> m, <a href="Language-C-Analysis-TravMonad.html#t:MonadSymtab">MonadSymtab</a> m, <a href="Language-C-Analysis-TravMonad.html#t:MonadCError">MonadCError</a> m) =&gt; <a name="t:MonadTrav" class="def">MonadTrav</a> m <span class="keyword">where</span></p><div class="doc"><p>Traversal monad</p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a name="v:handleDecl" class="def">handleDecl</a> :: <a href="Language-C-Analysis-SemRep.html#t:DeclEvent">DeclEvent</a> -&gt; m ()</p><div class="doc"><p>handling declarations and definitions</p></div></div><div class="subs instances"><p id="control.i:MonadTrav" class="caption collapser" onclick="toggleSection('i:MonadTrav')">Instances</p><div id="section.i:MonadTrav" class="show"><table><tr><td class="src"><a href="Language-C-Analysis-TravMonad.html#t:MonadTrav">MonadTrav</a> (<a href="Language-C-Analysis-TravMonad.html#t:Trav">Trav</a> s)</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><h1 id="g:5">Handling declarations</h1><div class="top"><p class="src"><a name="v:handleTagDecl" class="def">handleTagDecl</a> :: (<a href="Language-C-Analysis-TravMonad.html#t:MonadCError">MonadCError</a> m, <a href="Language-C-Analysis-TravMonad.html#t:MonadSymtab">MonadSymtab</a> m) =&gt; <a href="Language-C-Analysis-DefTable.html#t:TagFwdDecl">TagFwdDecl</a> -&gt; m ()</p><div class="doc"><p>forward declaration of a tag. Only necessary for name analysis, but otherwise no semantic
 consequences.</p></div></div><div class="top"><p class="src"><a name="v:handleTagDef" class="def">handleTagDef</a> :: <a href="Language-C-Analysis-TravMonad.html#t:MonadTrav">MonadTrav</a> m =&gt; <a href="Language-C-Analysis-SemRep.html#t:TagDef">TagDef</a> -&gt; m ()</p><div class="doc"><p>define the given composite type or enumeration
 If there is a declaration visible, overwrite it with the definition.
 Otherwise, enter a new definition in the current namespace.
 If there is already a definition present, yield an error (redeclaration).</p></div></div><div class="top"><p class="src"><a name="v:handleEnumeratorDef" class="def">handleEnumeratorDef</a> :: (<a href="Language-C-Analysis-TravMonad.html#t:MonadCError">MonadCError</a> m, <a href="Language-C-Analysis-TravMonad.html#t:MonadSymtab">MonadSymtab</a> m) =&gt; <a href="Language-C-Analysis-SemRep.html#t:Enumerator">Enumerator</a> -&gt; m ()</p></div><div class="top"><p class="src"><a name="v:handleTypeDef" class="def">handleTypeDef</a> :: <a href="Language-C-Analysis-TravMonad.html#t:MonadTrav">MonadTrav</a> m =&gt; <a href="Language-C-Analysis-SemRep.html#t:TypeDef">TypeDef</a> -&gt; m ()</p></div><div class="top"><p class="src"><a name="v:handleObjectDef" class="def">handleObjectDef</a> :: <a href="Language-C-Analysis-TravMonad.html#t:MonadTrav">MonadTrav</a> m =&gt; <a href="../base-4.7.0.2/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="Language-C-Data-Ident.html#t:Ident">Ident</a> -&gt; <a href="Language-C-Analysis-SemRep.html#t:ObjDef">ObjDef</a> -&gt; m ()</p><div class="doc"><p>handle object defintions (maybe tentative)</p></div></div><div class="top"><p class="src"><a name="v:handleFunDef" class="def">handleFunDef</a> :: <a href="Language-C-Analysis-TravMonad.html#t:MonadTrav">MonadTrav</a> m =&gt; <a href="Language-C-Data-Ident.html#t:Ident">Ident</a> -&gt; <a href="Language-C-Analysis-SemRep.html#t:FunDef">FunDef</a> -&gt; m ()</p><div class="doc"><p>handle function definitions</p></div></div><div class="top"><p class="src"><a name="v:handleVarDecl" class="def">handleVarDecl</a> :: <a href="Language-C-Analysis-TravMonad.html#t:MonadTrav">MonadTrav</a> m =&gt; <a href="../base-4.7.0.2/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="Language-C-Analysis-SemRep.html#t:Decl">Decl</a> -&gt; m ()</p><div class="doc"><p>handle variable declarations (external object declarations and function prototypes)
 variable declarations are either function prototypes, or external declarations, and not very
 interesting on their own. we only put them in the symbol table and call the handle.
 declarations never override definitions</p></div></div><div class="top"><p class="src"><a name="v:handleParamDecl" class="def">handleParamDecl</a> :: <a href="Language-C-Analysis-TravMonad.html#t:MonadTrav">MonadTrav</a> m =&gt; <a href="Language-C-Analysis-SemRep.html#t:ParamDecl">ParamDecl</a> -&gt; m ()</p><div class="doc"><p>handle parameter declaration. The interesting part is that parameters can be abstract
 (if they are part of a type). If they have a name, we enter the name (usually in function prototype or function scope),
 checking if there are duplicate definitions.
 FIXME: I think it would be more transparent to handle parameter declarations in a special way</p></div></div><div class="top"><p class="src"><a name="v:handleAsmBlock" class="def">handleAsmBlock</a> :: <a href="Language-C-Analysis-TravMonad.html#t:MonadTrav">MonadTrav</a> m =&gt; <a href="Language-C-Analysis-SemRep.html#t:AsmBlock">AsmBlock</a> -&gt; m ()</p></div><h1 id="g:6">Symbol table scope modification</h1><div class="top"><p class="src"><a name="v:enterPrototypeScope" class="def">enterPrototypeScope</a> :: <a href="Language-C-Analysis-TravMonad.html#t:MonadSymtab">MonadSymtab</a> m =&gt; m ()</p></div><div class="top"><p class="src"><a name="v:leavePrototypeScope" class="def">leavePrototypeScope</a> :: <a href="Language-C-Analysis-TravMonad.html#t:MonadSymtab">MonadSymtab</a> m =&gt; m ()</p></div><div class="top"><p class="src"><a name="v:enterFunctionScope" class="def">enterFunctionScope</a> :: <a href="Language-C-Analysis-TravMonad.html#t:MonadSymtab">MonadSymtab</a> m =&gt; m ()</p></div><div class="top"><p class="src"><a name="v:leaveFunctionScope" class="def">leaveFunctionScope</a> :: <a href="Language-C-Analysis-TravMonad.html#t:MonadSymtab">MonadSymtab</a> m =&gt; m ()</p></div><div class="top"><p class="src"><a name="v:enterBlockScope" class="def">enterBlockScope</a> :: <a href="Language-C-Analysis-TravMonad.html#t:MonadSymtab">MonadSymtab</a> m =&gt; m ()</p></div><div class="top"><p class="src"><a name="v:leaveBlockScope" class="def">leaveBlockScope</a> :: <a href="Language-C-Analysis-TravMonad.html#t:MonadSymtab">MonadSymtab</a> m =&gt; m ()</p></div><h1 id="g:7">Symbol table lookup (delegate)</h1><div class="top"><p class="src"><a name="v:lookupTypeDef" class="def">lookupTypeDef</a> :: (<a href="Language-C-Analysis-TravMonad.html#t:MonadCError">MonadCError</a> m, <a href="Language-C-Analysis-TravMonad.html#t:MonadSymtab">MonadSymtab</a> m) =&gt; <a href="Language-C-Data-Ident.html#t:Ident">Ident</a> -&gt; m <a href="Language-C-Analysis-SemRep.html#t:Type">Type</a></p><div class="doc"><p>lookup a type definition
 the 'wrong kind of object' is an internal error here,
 because the parser should distinguish typeDefs and other
 objects</p></div></div><div class="top"><p class="src"><a name="v:lookupObject" class="def">lookupObject</a> :: (<a href="Language-C-Analysis-TravMonad.html#t:MonadCError">MonadCError</a> m, <a href="Language-C-Analysis-TravMonad.html#t:MonadSymtab">MonadSymtab</a> m) =&gt; <a href="Language-C-Data-Ident.html#t:Ident">Ident</a> -&gt; m (<a href="../base-4.7.0.2/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Language-C-Analysis-SemRep.html#t:IdentDecl">IdentDecl</a>)</p><div class="doc"><p>lookup an object, function or enumerator</p></div></div><h1 id="g:8">Symbol table modification</h1><div class="top"><p class="src"><a name="v:createSUERef" class="def">createSUERef</a> :: (<a href="Language-C-Analysis-TravMonad.html#t:MonadCError">MonadCError</a> m, <a href="Language-C-Analysis-TravMonad.html#t:MonadSymtab">MonadSymtab</a> m) =&gt; <a href="Language-C-Data-Node.html#t:NodeInfo">NodeInfo</a> -&gt; <a href="../base-4.7.0.2/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Language-C-Data-Ident.html#t:Ident">Ident</a> -&gt; m <a href="Language-C-Data-Ident.html#t:SUERef">SUERef</a></p><div class="doc"><p>create a reference to a struct/union/enum</p><p>This currently depends on the fact the structs are tagged with unique names.
 We could use the name generation of TravMonad as well, which might be the better
 choice when dealing with autogenerated code.</p></div></div><h1 id="g:9">Additional error handling facilities</h1><div class="top"><p class="src"><a name="v:hadHardErrors" class="def">hadHardErrors</a> :: [<a href="Language-C-Data-Error.html#t:CError">CError</a>] -&gt; <a href="../base-4.7.0.2/Data-Bool.html#t:Bool">Bool</a></p><div class="doc"><p>check wheter non-recoverable errors occurred</p></div></div><div class="top"><p class="src"><a name="v:handleTravError" class="def">handleTravError</a> :: <a href="Language-C-Analysis-TravMonad.html#t:MonadCError">MonadCError</a> m =&gt; m a -&gt; m (<a href="../base-4.7.0.2/Data-Maybe.html#t:Maybe">Maybe</a> a)</p></div><div class="top"><p class="src"><a name="v:throwOnLeft" class="def">throwOnLeft</a> :: (<a href="Language-C-Analysis-TravMonad.html#t:MonadCError">MonadCError</a> m, <a href="Language-C-Data-Error.html#t:Error">Error</a> e) =&gt; <a href="../base-4.7.0.2/Data-Either.html#t:Either">Either</a> e a -&gt; m a</p><div class="doc"><p>raise an error based on an Either argument</p></div></div><div class="top"><p class="src"><a name="v:astError" class="def">astError</a> :: <a href="Language-C-Analysis-TravMonad.html#t:MonadCError">MonadCError</a> m =&gt; <a href="Language-C-Data-Node.html#t:NodeInfo">NodeInfo</a> -&gt; <a href="../base-4.7.0.2/Data-String.html#t:String">String</a> -&gt; m a</p><div class="doc"><p>raise an error caused by a malformed AST</p></div></div><div class="top"><p class="src"><a name="v:warn" class="def">warn</a> :: (<a href="Language-C-Data-Error.html#t:Error">Error</a> e, <a href="Language-C-Analysis-TravMonad.html#t:MonadCError">MonadCError</a> m) =&gt; e -&gt; m ()</p></div><h1 id="g:10">Trav - default MonadTrav implementation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Trav" class="def">Trav</a> s a</p><div class="doc"><p>simple traversal monad, providing user state and callbacks</p></div><div class="subs instances"><p id="control.i:Trav" class="caption collapser" onclick="toggleSection('i:Trav')">Instances</p><div id="section.i:Trav" class="show"><table><tr><td class="src"><a href="../base-4.7.0.2/Control-Monad.html#t:Monad">Monad</a> (<a href="Language-C-Analysis-TravMonad.html#t:Trav">Trav</a> s)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="../base-4.7.0.2/Control-Monad.html#t:Functor">Functor</a> (<a href="Language-C-Analysis-TravMonad.html#t:Trav">Trav</a> s)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="../base-4.7.0.2/Control-Applicative.html#t:Applicative">Applicative</a> (<a href="Language-C-Analysis-TravMonad.html#t:Trav">Trav</a> s)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Language-C-Analysis-TravMonad.html#t:MonadTrav">MonadTrav</a> (<a href="Language-C-Analysis-TravMonad.html#t:Trav">Trav</a> s)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Language-C-Analysis-TravMonad.html#t:MonadCError">MonadCError</a> (<a href="Language-C-Analysis-TravMonad.html#t:Trav">Trav</a> s)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Language-C-Analysis-TravMonad.html#t:MonadSymtab">MonadSymtab</a> (<a href="Language-C-Analysis-TravMonad.html#t:Trav">Trav</a> s)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Language-C-Analysis-TravMonad.html#t:MonadName">MonadName</a> (<a href="Language-C-Analysis-TravMonad.html#t:Trav">Trav</a> s)</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:runTrav" class="def">runTrav</a> :: <span class="keyword">forall</span> s a. s -&gt; <a href="Language-C-Analysis-TravMonad.html#t:Trav">Trav</a> s a -&gt; <a href="../base-4.7.0.2/Data-Either.html#t:Either">Either</a> [<a href="Language-C-Data-Error.html#t:CError">CError</a>] (a, <a href="Language-C-Analysis-TravMonad.html#t:TravState">TravState</a> s)</p></div><div class="top"><p class="src"><a name="v:runTrav_" class="def">runTrav_</a> ::  <a href="Language-C-Analysis-TravMonad.html#t:Trav">Trav</a> () a -&gt; <a href="../base-4.7.0.2/Data-Either.html#t:Either">Either</a> [<a href="Language-C-Data-Error.html#t:CError">CError</a>] (a, [<a href="Language-C-Data-Error.html#t:CError">CError</a>])</p></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:TravState" class="def">TravState</a> s</p></div><div class="top"><p class="src"><a name="v:initTravState" class="def">initTravState</a> ::  s -&gt; <a href="Language-C-Analysis-TravMonad.html#t:TravState">TravState</a> s</p></div><div class="top"><p class="src"><a name="v:withExtDeclHandler" class="def">withExtDeclHandler</a> ::  <a href="Language-C-Analysis-TravMonad.html#t:Trav">Trav</a> s a -&gt; (<a href="Language-C-Analysis-SemRep.html#t:DeclEvent">DeclEvent</a> -&gt; <a href="Language-C-Analysis-TravMonad.html#t:Trav">Trav</a> s ()) -&gt; <a href="Language-C-Analysis-TravMonad.html#t:Trav">Trav</a> s a</p></div><div class="top"><p class="src"><a name="v:modifyUserState" class="def">modifyUserState</a> ::  (s -&gt; s) -&gt; <a href="Language-C-Analysis-TravMonad.html#t:Trav">Trav</a> s ()</p></div><div class="top"><p class="src"><a name="v:userState" class="def">userState</a> :: <a href="Language-C-Analysis-TravMonad.html#t:TravState">TravState</a> s -&gt; s</p></div><div class="top"><p class="src"><a name="v:getUserState" class="def">getUserState</a> ::  <a href="Language-C-Analysis-TravMonad.html#t:Trav">Trav</a> s s</p></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:TravOptions" class="def">TravOptions</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:TravOptions" class="def">TravOptions</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:language" class="def">language</a> :: <a href="Language-C-Analysis-TravMonad.html#t:CLanguage">CLanguage</a></dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div></div><div class="top"><p class="src"><a name="v:modifyOptions" class="def">modifyOptions</a> ::  (<a href="Language-C-Analysis-TravMonad.html#t:TravOptions">TravOptions</a> -&gt; <a href="Language-C-Analysis-TravMonad.html#t:TravOptions">TravOptions</a>) -&gt; <a href="Language-C-Analysis-TravMonad.html#t:Trav">Trav</a> s ()</p></div><div class="top"><p class="src"><a name="v:travErrors" class="def">travErrors</a> ::  <a href="Language-C-Analysis-TravMonad.html#t:TravState">TravState</a> s -&gt; [<a href="Language-C-Data-Error.html#t:CError">CError</a>]</p></div><h1 id="g:11">Language options</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:CLanguage" class="def">CLanguage</a></p><div class="doc"><p>The variety of the C language to accept. Note: this is not yet enforced.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:C89" class="def">C89</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:C99" class="def">C99</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:GNU89" class="def">GNU89</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:GNU99" class="def">GNU99</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div><h1 id="g:12">Helpers</h1><div class="top"><p class="src"><a name="v:mapMaybeM" class="def">mapMaybeM</a> :: <a href="../base-4.7.0.2/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="../base-4.7.0.2/Data-Maybe.html#t:Maybe">Maybe</a> a -&gt; (a -&gt; m b) -&gt; m (<a href="../base-4.7.0.2/Data-Maybe.html#t:Maybe">Maybe</a> b)</p></div><div class="top"><p class="src"><a name="v:maybeM" class="def">maybeM</a> :: <a href="../base-4.7.0.2/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="../base-4.7.0.2/Data-Maybe.html#t:Maybe">Maybe</a> a -&gt; (a -&gt; m ()) -&gt; m ()</p></div><div class="top"><p class="src"><a name="v:mapSndM" class="def">mapSndM</a> :: <a href="../base-4.7.0.2/Control-Monad.html#t:Monad">Monad</a> m =&gt; (b -&gt; m c) -&gt; (a, b) -&gt; m (a, c)</p></div><div class="top"><p class="src"><a name="v:concatMapM" class="def">concatMapM</a> :: <a href="../base-4.7.0.2/Control-Monad.html#t:Monad">Monad</a> m =&gt; (a -&gt; m [b]) -&gt; [a] -&gt; m [b]</p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.14.3</p></div></body></html>